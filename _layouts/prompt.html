---
layout: null
---

<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>{{ page.title }}</title>
<meta name="description" content="{{ page.description | default: 'Prompt with copy button' }}"/>

<link rel="stylesheet" href="{{ '/assets/css/prompt.css' | relative_url }}">
</head>
<body>
  <div class="center">
    <button class="back-btn" onclick="goBack()">⬅️ Back</button>

    <h1>{{ page.title }}</h1>

    {%- assign show_trigger = false -%}
    {%- if page.prompt and page.prompt contains '(your-trigger-word)' -%}{%- assign show_trigger = true -%}{%- endif -%}
    {%- if page.negative_prompt and page.negative_prompt contains '(your-trigger-word)' -%}{%- assign show_trigger = true -%}{%- endif -%}

    {%- assign show_gender = false -%}
    {%- if page.prompt and page.prompt contains '(man or woman)' -%}{%- assign show_gender = true -%}{%- endif -%}
    {%- if page.negative_prompt and page.negative_prompt contains '(man or woman)' -%}{%- assign show_gender = true -%}{%- endif -%}

    {% if show_trigger or show_gender %}
    <div class="controls" role="group" aria-label="Prompt customization controls">
      {% if show_trigger %}
      <label class="ctrl">
        <span>Trigger word</span>
        <input id="ctrl_trigger" type="text" inputmode="text" autocomplete="off" placeholder="Enter trigger word">
      </label>
      {% endif %}
      {% if show_gender %}
      <label class="ctrl">
        <span>Gender term</span>
        <select id="ctrl_gender">
          <option value="">Choose…</option>
          <option value="man">man</option>
          <option value="woman">woman</option>
        </select>
      </label>
      {% endif %}
    </div>
    {% endif %}

    <!-- Main (Flux or Kling main) -->
    {%- assign badge_label = page.badge_main -%}
    {%- if badge_label == nil or badge_label == "" -%}
      {%- if page.type == "flux" -%}
        {%- assign badge_label = "Flux Prompt" -%}
      {%- else -%}
        {%- assign badge_label = "Kling Prompt" -%}
      {%- endif -%}
    {%- endif -%}

    {% include prompt-box.html
      badge   = badge_label
      field_id = 'content_main'
      text    = page.prompt
    %}

    <!-- Negative only for Kling -->
    {% if page.type == 'kling' and page.negative_prompt %}
      {%- assign neg_badge = page.badge_negative | default: "Kling Negative Prompt" -%}
      {% include prompt-box.html
        badge   = neg_badge
        field_id = 'content_negative'
        text    = page.negative_prompt
      %}
      <button class="back-btn" onclick="goBack()">⬅️ Back</button>
    {% endif %}
  </div>

  <div id="toast" class="toast" role="status" aria-live="polite">Copied!</div>

  <script>
  function goBack() {
    const explicit = "{{ page.back_url | default: '' }}";
    if (explicit) { window.location.href = explicit; return; }
  
    const canvaBase = "https://www.canva.com/design/DAGtoI-rTGs/suzi8xtrpeit_xpwmzWJgw/view?utm_content=DAGtoI-rTGs&utm_campaign=designshare&utm_medium=link2&utm_source=uniquelinks&utlId=he24d1b06e2#";
    const pageNum = "{{ page.canva_page | default: '' }}";
    const deepCanva = pageNum ? canvaBase + pageNum : "{{ site.baseurl }}/";
  
    const ref = document.referrer || "";
    const isCanva = /(^https?:\/\/)?([^\/]+\.)?canva\.com(\/|$)/i.test(ref);
  
    // If referrer is NOT Canva and we actually have history, use back()
    if (!isCanva && ref && ref !== location.href && window.history.length > 1) {
      window.history.back();
      return;
    }
  
    // Otherwise force our known deep Canva link (keeps the #page)
    window.location.href = deepCanva;
}

  // --- Customization logic ---
  (function(){
    const main = document.getElementById('content_main');
    const neg = document.getElementById('content_negative');
    if (main && !main.dataset.original) main.dataset.original = (typeof main.value === 'string') ? main.value : (main.textContent || '');
    if (neg && !neg.dataset.original) neg.dataset.original = (typeof neg.value === 'string') ? neg.value : (neg.textContent || '');

    const triggerInput = document.getElementById('ctrl_trigger');
    const genderSelect = document.getElementById('ctrl_gender');

    function replaceAll(haystack, needle, replacement){
      if (!haystack || !needle) return haystack;
      return haystack.split(needle).join(replacement);
    }

    function applyCustomizations(){
      const trigger = triggerInput ? (triggerInput.value || '') : '';
      const gender = genderSelect ? (genderSelect.value || '') : '';

      if (main && main.dataset.original){
        let t = main.dataset.original;
        if (gender) t = replaceAll(t, '(man or woman)', gender);
        if (trigger) t = replaceAll(t, '(your-trigger-word)', trigger);
        main.value = t;
      }
      if (neg && neg.dataset.original){
        let t = neg.dataset.original;
        if (gender) t = replaceAll(t, '(man or woman)', gender);
        if (trigger) t = replaceAll(t, '(your-trigger-word)', trigger);
        neg.value = t;
      }
    }

    if (triggerInput) triggerInput.addEventListener('input', applyCustomizations);
    if (genderSelect) genderSelect.addEventListener('change', applyCustomizations);
    applyCustomizations();
  })();

  async function copyIt(id){
    const el = document.getElementById(id);
    if (!el) return;

    // Prefer .value for <textarea>, fall back to textContent for <div>/<pre>
    const text = (typeof el.value === "string") ? el.value : (el.textContent || "");
    if (!text) { showToast("Nothing to copy"); return; }

    try {
      await navigator.clipboard.writeText(text);
      showToast("Copied!");
    } catch (e) {
      // Fallback for older/locked-down contexts
      let ta = (el.tagName === "TEXTAREA") ? el : null;
      if (!ta) {
        ta = document.createElement("textarea");
        ta.style.position = "fixed";
        ta.style.opacity = "0";
        ta.value = text;
        document.body.appendChild(ta);
      }
      ta.focus();
      ta.select();
      try { document.execCommand("copy"); } catch(_) {}
      if (ta !== el) document.body.removeChild(ta);
      showToast("Copied!");
    }
  }

  let tid;
  function showToast(msg){
    const t = document.getElementById('toast');
    if (!t) return;
    if (msg) t.textContent = msg;
    t.classList.add('show');
    clearTimeout(tid);
    tid = setTimeout(()=> t.classList.remove('show'), 1200);
  }
  </script>
</body>
</html>

